import{R as v,c as N,u as S,r as i,j as e,s as y,b as E}from"./index-DFJ8RUfK.js";import{S as k,T as u,I as P,a as T,d as C,b as I}from"./Singup-A413lFju.js";import{Q as q,B as n}from"./react-toastify.esm-DG0hKP4U.js";import{a as L}from"./js.cookie-Cz0CWeBA.js";import"./styled-By87HV1d.js";import"./extendSxProp-DYxyISX6.js";import"./createSvgIcon-B6mKuzPO.js";import"./createSvgIcon-f1EqLi6r.js";import"./clsx-B-dksMZM.js";import"./useIsFocusVisible-Dz61t37o.js";import"./ButtonBase-DdU2GydC.js";import"./List-Q6WcxzjW.js";import"./useTheme-BqiqaDCy.js";import"./useTheme-Bxj5s0eR.js";import"./Paper-BBTIDyX5.js";import"./Typography-CEAQ5Qda.js";const K=()=>{v.useEffect(()=>{window.scrollTo(0,0)},[]);const x=N(),d=S(),[o,c]=i.useState({email:"",password:""}),[a,m]=i.useState({}),[l,b]=i.useState(!1),[p,h]=i.useState(!1),g=async s=>{x(y(o.email)),s.preventDefault();const r=f(o);if(Object.keys(r).length>0){m(r);return}try{const{data:t}=await E.post("http://127.0.0.1:8000/api/login",{...o});console.log(t),t?(L.set("user",JSON.stringify(t.user),{expires:7}),d("/"),window.location.reload(),n.success("Login successful")):n.error(t.msgErr)}catch(t){t.response&&t.response.data?m({backend:t.response.data.msgErr}):n.error("An unexpected error occurred")}},f=s=>{const r={};return s.email?/\S+@\S+\.\S+/.test(s.email)||(r.email="Email address is invalid"):r.email="Email is required",s.password||(r.password="Password is required"),r},w=()=>{b(!l)},j=()=>{h(!p)};return p?e.jsx(k,{}):e.jsxs("div",{className:"min-h-screen flex flex-col justify-center items-center bg-white",children:[e.jsxs("div",{className:"w-full max-w-xl p-8 text-center mb-auto",children:[e.jsx("h2",{className:"text-4xl font-bold mb-4 text-[#0494b8]",children:"Login"}),e.jsx("p",{className:"text-lg text-gray-700 mb-10",children:"Welcome back!"}),e.jsxs("form",{onSubmit:g,className:"w-full",children:[e.jsx("div",{className:"mb-6",children:e.jsx(u,{fullWidth:!0,variant:"outlined",label:"Email",type:"email",name:"email",onChange:s=>c({...o,[s.target.name]:s.target.value}),required:!0,error:!!a.email,helperText:a.email})}),e.jsx("div",{className:"relative mb-6",children:e.jsx(u,{fullWidth:!0,variant:"outlined",label:"Password",name:"password",type:l?"text":"password",onChange:s=>c({...o,[s.target.name]:s.target.value}),required:!0,error:!!a.password,helperText:a.password,InputProps:{endAdornment:e.jsx(P,{position:"end",children:e.jsx(T,{"aria-label":"toggle password visibility",onClick:w,edge:"end",children:l?e.jsx(C,{}):e.jsx(I,{})})})}})}),a.backend&&e.jsx("p",{className:"text-red-500 mb-4",children:a.backend}),e.jsx("a",{href:"#",className:"text-[#0494b8] mb-4 block",onClick:()=>d("/forgot-password"),children:"Forgot Password?"}),e.jsx("button",{className:"w-[200px] bg-[#0494b8] text-xl hover:border hover:border-spacing-0 border border-[#0494b8] hover:text-[#0494b8] hover:bg-white text-white rounded-full px-4 py-2 hover:border-opacity-90",type:"submit",children:"Login"}),e.jsxs("p",{className:"mt-4 text-gray-500",children:["Not a member?"," ",e.jsx("button",{onClick:j,className:"text-[#0494b8]",children:"Sign Up"})]})]})]}),e.jsx(q,{})]})};export{K as default};
